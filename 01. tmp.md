## 3.3. Manejo de directorios y archivos <a name="directorios"><a/>  

> Ir al [Índice](#indice)

Antes de empezar a aprender los comandos necesarios para movernos y manejar directorios es necesario que conozcamos la estructura de directorios de Linux. 

Los sistemas GNU/Linux tienen un patrón bastante estricto y específico al respecto de la organización jerárquica de los directorios, definido por _Filesystem Hierarquy Standard_ (_FHS_), para evitar problemas de compatibilidad entre distribuciones y conseguir un sistema operativo sólido.  

La base de esta jerarquía es el directorio raíz (_root_), que se representa con el signo «/», y contiene al resto de directorios/archivos. 

Dentro del directorio raíz («/») encontramos varios directorios que posee funciones específicas para el sistema operativo. Los principales se describen en la siguiente tabla:


| Directorio  | Descripción                                                                                                                         |
|-------------|-------------------------------------------------------------------------------------------------------------------------------------|
| /bin        | aplicaciones binarias importantes                                                                                                   |
| /boot       | Ficheros de configuración del arranque, núcleos y otros ficheros necesarios para el arranque (boot) del equipo.                     |
| /dev        | los ficheros de dispositivo                                                                                                         |
| /etc        | ficheros de configuración, scripts de arranque, etc.                                                                                |
| /home       | directorios personales (home) para los diferentes usuarios.                                                                         |
| /lib        | librerías del sistema (libraries)                                                                                                   |
| /media      | particiones montadas (cargadas) automáticamente en el disco duro y medios (media) extraíbles como CDs, cámaras digitales, etc.      |
| /mnt        | sistemas de archivos montados manualmente en el disco duro.                                                                         |
| /opt        | proporciona una ubicación donde instalar aplicaciones opcionales (de terceros)                                                      |
| /proc       | directorio dinámico especial que mantiene información sobre el estado del sistema, incluyendo los procesos actualmente en ejecución |
| /root       | directorio personal del usuario root (superusuario); también llamado "barra-root".                                                  |
| /sbin       | binarios importantes del sistema                                                                                                    |
| /sys        | archivos del sistema (system)                                                                                                       |
| /tmp        | temporary files                                                                                                                     |
| /usr        | aplicaciones y archivos a los que puede acceder la mayoría de los usuarios                                                          |
| /var        | archivos variables como archivos de registros y bases de datos                                                                      |  

Para más detalles ver: [Linux Fundation](https://www.linuxfoundation.org/blog/blog/classic-sysadmin-the-linux-filesystem-explained), [Ayuda Linux](https://ayudalinux.com/estructura-sistema-archivos/) y [Ayuda Ubuntu](https://help.ubuntu.com/kubuntu/desktopguide/es/directories-file-systems.html).  

En este punto no es muy importante conocer los detalles de cada uno de estos directorios, ya que para hacer modificaciones en estos se requieren conocimientos más avanzados. 

El único directorio en el que nosotros vamos a trabajar en en _home_, que contiene los archivos/directorios de cada uno de los usuarios (un mismo equipo con Linux puede tener más de un usuario definido, igual que en otros sistemas operativos). Cuando arrancamos el terminal o el visor de archivos generalmente nos llevará a la carpeta de nuestro usuario dentro de la carpeta _home_, por ejemplo, _/home/usuario/_. Para saber el directorio en el que nos encontramos podemos utilizar el comando _pwd_:

```bash
pwd

# Salida: /home/usuario
```

### Moverse entre directorios

Para cambiar de directorio utilizaremos el comando _cd_ (_change directory_). Por ejemplo, si queremos acceder a la carpeta _Descargas_ dentro de nuestra carpeta de usuario podemos escribir:

```bash
cd Descargas
```

Tras ello podemos comprobar con _pwd_ que ahora estamos en la carpeta _/home/usuario/Descargas/_.  

¿Qué ocurre si en lugar de _Descargas_ nos equivocamos y escribimos el nombre mal por error?  

```bash
cd descargas

# Salida: bash: cd: descargas: No existe el archivo o el directorio
```

Efectivamente, Linux distingue entre mayúsculas y minúsculas, y por lo tanto, la carpeta _descargas_ no existe, y así nos lo indica el comando cuando lo ejecutamos.  

Para evitar este tipo de errores al escribir podemos hacer uso del tabulador (tecla TAB). Simplemente escribiendo las primeras letras del nombre de un archivo o directorio el terminal completará el nombre si sólo hay una opción, si hubiera más, pulsando TAB dos veces, te mostrará los nombre disponibles en el directorio actual. En el segundo caso podemos añadir alguna letra más del nombre y pulsar TAB para que se complete el nombre. Es se conoce como _autocompletado_, y es muy útil para evitar errores.  

Bien, ahora que estamos en _/home/usuario/Descargas/_, ¿cómo vuelvo hacia atrás, a la carpeta anterior?  
Para ello usaremos uno de los 2 directorios especiales que hay dentro de cada directorio que vimos antes (ver [aquí](#dir_especiales)). En este caso usaremos el directorio ".." que hace referencia al directorio superior (_parent_), el que esta justo encima en la jerarquía:

```bash
cd ..
```

Ahora, si usamos _pwd_, podremos comprobar que hemos vuelto a _/home/usuario/_, y por lo tanto, hemos salido de la carpeta _Descargas_. 

Si queremos movernes varios niveles al mismo tiempo podemos encaderar la ruta a la que queremos entrar, Por ejemplo:

```bash
cd snap/firefox/common/
```

Y para ir hacia atrás varios directorios basta con encaderar ".." así:

```bash
cd ../../..
```

De este modo hemos ido 3 directorios hacia abajo en el jerarquía, hasta llegar a _/home/usuario/snap/firefox/common/_ y luego hemos subido 3 directorio para volver a _/home/usuario/_. 

Si ejecutamos el comando _cd_ sin ningún argumento (en este caso una ruta de un directorio) nos llegará a la carpeta _/home/usuario/_, que generalmente se refiero como _home_. También es posible hacer lo mismo con el caracter especial «~» (virgulilla, alt+4):

```bash
cd ~

# o podríamos usar este comodín en una ruta de directorios si no estamos en home

cd ~/snap/firefox/common/

```

En lugar de movernos con _cd_, si lo único que queremos es ver que hay en una carpeta podemos usar el comando _ls_ con la ruta que queremos explorar:

```bash
ls -lh snap/firefox/
```

De esta manera veremos el contenido de la carpeta sin movernos de donde estamos.  

### Crear y borrar archivos y carpetas

Ahora vamos a crear un directorio con el comando _mkdir_ (_make directory_):

```bash
# vamos a home
cd
#
mkdir bia
```

Para eliminarlo usaremos el comando _rmdir_ (_remove directory_):
```bash
rmdir bia
```

> [!IMPORTANT]
> _rmdir_ sólo sirve para eliminar directorios que estén vacíos.  

Vamos ahora a crear el directorio de nuevo, nos meteremos en este, y vamos a crear un fichero en su interior con el comando _touch_ y un subdirectorio:

```bash
mkdir bia
cd bia
touch mi_fichero.txt
mkdir sub_bia
cd ..
```

Si ahora intentamos borrar el directorio con _rmdir_ nos a dará el siguiente error:

`rmdir: fallo al borrar 'bia': El directorio no está vacío`






> [!WARNING]
> Nombre archivos/directorios
> Extensiones (_.txt_ o _.pdf_)

<!--




Edición de ficheros
	ver ficheros
	Crear ficheros
	Editar ficheros

Permisos???


As you can see, in the linuxstuff directory (and in all other directories), there are two special directories called (.) and (..)
The current directory (.)

In Linux, (.) means the current directory, so typing

$ cd .

NOTE: there is a space between cd and the dot

$ ls -la

means stay where you are (the linuxstuff directory).

This may not seem very useful at first, but using (.) as the name of the current directory will save a lot of typing, as we shall see later in the tutorial.
The parent directory (..)

(..) means the parent of the current directory, so typing

$ cd ..

will take you one directory up the hierarchy (back to your home directory). Try it now and then type

$ ls -l

Note: typing cd with no argument always returns you to your home directory. This is very useful if you are lost in the file system.
1.5 Pathnames

pwd (print working directory)

Pathnames enable you to work out where you are in relation to the whole file-system. For example, to find out the absolute pathname of your home-directory, type cd to get back to your home-directory and then type

$ pwd

The full pathname will look something like this -

/home/alumnos/cursof

which means that cursof (your home directory) is in the sub-directory alumnos,which is in the home sub-directory, which is in the top-level root directory called " / " .

Exercise

Type:

$ cd linuxstaff/backups/

which would be the path of the working directory?
1.6 More about home directories and pathnames
Understanding pathnames

First type cd to get back to your home-directory,

$ cd

then type

$ ls linuxstuff/

to list the contents of your linuxstuff directory.

Now type

$ ls backups/

You will get a message like this -

ls: no se puede acceder a backups/: No existe el archivo o el directorio

The reason is, backups is not in your current working directory. To use a command on a file (or directory) not in the current working directory (the directory you are currently in), you must either cd to the correct directory, or specify its full pathname. To list the contents of your backups directory, you must type (after created it)

$ ls linuxstuff/backups/
~ (your home directory)

Home directories can also be referred to by the tilde ~ character. It can be used to specify paths starting at your home directory. So typing

$ ls ~/linuxstuff

will list the contents of your linuxstuffdirectory, no matter where you currently are in the file system.

What do you think

$ ls ~

would list?

What do you think

$ ls ~/..

would list?
Summary

Command
	

Meaning

ls
	

list files and directories

ls -a
	

list all files and directories

ls -l
	

list all files and directories using long listing format

mkdir
	

make a directory

cd directory
	

change to named directory

cd
	

change to home-directory

cd ~
	

change to home-directory

cd ..
	

change to parent directory

pwd
	

display the path of the current directory



